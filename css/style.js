"use strict";function addMathMouseOverListener(){let e=document.createElement("div");e.id="MathFrame",document.body.appendChild(e);let t=document.getElementsByTagName("a");for(let n=0;n<t.length;n++){let i=t[n],l=i.getAttribute("href");null!=l&&l.includes("#mjx-eqn")&&(l=l.replace("%3A",":"),i.addEventListener("mouseover",function(t){let n=document.getElementById(l.substring(1)),i=n.closest("displayed-eq"),a=i.cloneNode(!0),o=n.getBoundingClientRect().top+.5*n.getBoundingClientRect().height-i.getBoundingClientRect().top;for(o>160&&(a.style.position="relative",a.style.top=160-o+"px");e.firstChild;)e.removeChild(e.firstChild);e.appendChild(a),e.style.visibility="visible"},!1),i.addEventListener("mouseleave",function(t){e.style.visibility="collapse"},!1))}}function startSimulation(e){var t=document.createElement("iframe");t.id="Simulation_frame",t.src=e;var n=document.createElement("div");n.id="Simulation_screen",n.insertBefore(t,n.firstChild),n.addEventListener("click",function(){n.parentNode.removeChild(n)},!1),n.addEventListener("touchstart",function(){n.parentNode.removeChild(n)},!1);var i=document.getElementsByTagName("body")[0];i.insertBefore(n,i.firstChild)}function addStartSimulationListener(){for(var e=document.getElementsByTagName("input"),t=0;t<e.length;t++)e[t].addEventListener("click",function(){startSimulation(this.getAttribute("html-path"))})}function addParameterChangedListener(e){for(var t=document.getElementsByTagName("input"),n=0;n<e.length;n++)t[n].addEventListener("touchstart",e[n]),t[n].addEventListener("click",e[n])}function addScrollDecoration(){if(window.location.href.includes("index.html"))return;let e=document.getElementById("Minimap");null!=e&&document.body.removeChild(e),(e=document.createElement("div")).id="Minimap";let t=[0],n=[],i=[];{let e=document.getElementsByTagName("h2"),l=document.getElementsByTagName("h3");const a=document.body.getBoundingClientRect().top;for(let n=0;n<e.length;n++)t.push(e[n].getBoundingClientRect().top-a);for(let e=0;e<l.length;e++){let t="Note"==l[e].parentNode.className;t&&l[e]!=l[e].parentNode.getElementsByTagName("h3")[0]||(n.push(l[e].getBoundingClientRect().top-a),t&&i.push(n[n.length-1]))}t.push(document.documentElement.scrollHeight),n.push(document.documentElement.scrollHeight)}for(let l=0,a=0;l<t.length-1;l++){let o=document.createElement("div");o.className="Minimap_section",o.style.height=100*(t[l+1]-t[l])/t[t.length-1]-.5+"%";let d=t[l];for(;a<n.length;a++){if(Math.min(n[a],t[l+1])<d)continue;let e=document.createElement("div");if(e.className="Minimap_paragraph",e.style.height=100*(Math.min(n[a],t[l+1])-d)/(t[l+1]-t[l])+"%",d!=t[l]&&-1!=i.indexOf(n[a-1])&&(e.className="Minimap_paragraph-note"),o.appendChild(e),(d=n[a])>t[l+1])break}e.appendChild(o)}document.body.appendChild(e)}function setDateColor(){let e=document.getElementsByClassName("TOC_chapterDate"),t=new Date;for(let n=0;n<e.length;n++){let i=e[n].innerText.split("."),l=new Date(Number(i[0]),Number(i[1])-1,Number(i[2])),a=(t.getTime()-l.getTime())/864e5;e[n].classList.add(a<=30?"TOC_chapterDateColor1":a<=90?"TOC_chapterDateColor2":"TOC_chapterDateColor3")}}window.onload=function(){addScrollDecoration(),addStartSimulationListener(),screen.width>650&&addMathMouseOverListener()};