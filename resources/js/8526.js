"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[8526],{8526:(t,e,s)=>{s.r(e),s.d(e,{spec:()=>E});var a=s(1550),n=s(4088);let i,o,c,l,r,h=0;const u=.5,d=(t,e,s,i,o)=>{const c=n.f7/o;return n.iC.Delta_Rho(t,s,new a.V([0,0,Math.sin(c*e)/c*i]))};class f{constructor(t,e){this.slices=[new a.p2(1),new a.p2(1)],this.deviation=t.deviation,this.Q=t.Q,this.T=t.T;const s=a.ay.Ball(.02,2),f=a.ay.Ball(.02,0),m=n.iC.Delta_Rho_max(this.deviation);s.position.z=m,f.position.z=-m;const p=[[],[]],E=[[],[]],_=[[],[]],M=a.ay.Arrow(0),w=a.ay.Arrow(1),C=a.ay.Arrow(5);for(let t=0;t<441;t++)for(let e=0;e<2;e++)p[e].push(0===t?M:M.createInstance("E"+t+e)),E[e].push(0===t?w:w.createInstance("B"+t+e)),_[e].push(0===t?C:C.createInstance("j"+t+e));this.draw=t=>{i=h>0||!(h<0)&&i,this.slices[0].setEnabled(!0),this.slices[1].setEnabled(o),this.slices[0].setDirection(i?2:0),this.slices[1].setDirection(i?0:1),o?(this.slices[0].setOffset(i?[-.5+h,0,-h]:[-h,-.5-h,0]),this.slices[1].setOffset(i?[h,0,u-h]:[-.5-h,-h,0])):this.slices[0].setOffset(i?[0,0,-h]:[-h,0,0]),this.slices.forEach(((e,s)=>{e.getPos(21).forEach(((i,o)=>{if(p[s][o].setEnabled(e.frame.isEnabled()&&c),E[s][o].setEnabled(e.frame.isEnabled()&&l),_[s][o].setEnabled(e.frame.isEnabled()&&r),!e.frame.isEnabled())return;const[h,u]=((t,e,s,i,o)=>{const c=t.len3(),l=Math.max(0,e-(c+3/s)/n.c),r=Math.min(e,e-(c-3/s)/n.c),h=(r-l)/30,u=n.f7/o,d=i/n.Zy,f=n.iC.E_Delta_infty(t,s,new a.V([0,0,d/u*Math.sin(u*l)])),[m,p]=n.iC.EB_Delta(t,e-l,s,new a.V([0,0,.5*h*d*Math.cos(u*l)])),[E,_]=n.iC.EB_Delta(t,e-r,s,new a.V([0,0,.5*h*d*Math.cos(u*r)]));let M=f.plus(m).plus(E),w=p.plus(_);for(let i=1;i<30;i++){const[o,c]=n.iC.EB_Delta(t,e-(l+i*h),s,new a.V([0,0,h*d*Math.cos(u*(l+i*h))]));M=M.plus(o),w=w.plus(c)}return[M,w]})(i,t,this.deviation,this.Q,this.T);if(a.ay.Set_ArrowPosition(p[s][o],i,h,1),a.ay.Set_ArrowPosition(E[s][o],i,u,n.c),r){const e=((t,e,s,i,o)=>n.iC.E_Delta_init(t,s,new a.V([0,0,-i*Math.cos(e*n.f7/o)])))(i,t,this.deviation,this.Q,this.T);a.ay.Set_ArrowPosition(_[s][o],i,e,10)}}))}));const e=3e-11,M=d(new a.V([0,0,m]),t,this.deviation,this.Q,this.T);n.iC.SetBallColor(s,(M+e)/6e-11),n.iC.SetBallColor(f,(-M+e)/6e-11),this.slices.forEach((s=>{if(!s.frame.isEnabled())return;const a=s.getPos(71),i=s.getDat(71);a.forEach(((s,a)=>{const o=d(s,t,this.deviation,this.Q,this.T);n.iC.SetRGBA(i,a,(o+e)/6e-11)})),s.updateDat()}))}}}let m;const p=()=>{void 0!==m&&(m.value=h.toString())},E={title:"電気双極子放射",comment:"電荷は＋が赤、-が青<br>1辺の長さ: 1m",cases:[{title:"電気双極子放射（周期: 1ナノ秒）",setup:p,init:[{deviation:10,Q:15e-5,T:1e-9}]},{title:"電気双極子放射（周期: 2ナノ秒）",setup:p,init:[{deviation:10,Q:25e-5,T:2e-9}]}],config:{time_multiplier:5e-10},init:()=>{a.jG.set_3D(2,1.3,.35,!0),h=0,i=!0,o=!0,c=!0,l=!0,r=!1,h=0,m=void 0},controls:[{type:"label",text:"電磁場"},[{type:"radio",name:"EB",text:"電場",checked:()=>c&&!l,changedToChecked:()=>[c,l]=[!0,!1],color:"#ff0000"},{type:"radio",name:"EB",text:"磁場",checked:()=>!c&&l,changedToChecked:()=>[c,l]=[!1,!0],color:"#00b700"},{type:"radio",name:"EB",text:"両方",checked:()=>c&&l,changedToChecked:()=>[c,l]=[!0,!0]}],[{type:"check",text:"電流",checked:()=>r,change:t=>r=t,color:"#b76eff"}],{type:"label",text:"スライス"},[{type:"radio",name:"slice",text:"1面",checked:()=>!o,changedToChecked:()=>o=!1},{type:"radio",name:"slice",text:"2面",checked:()=>o,changedToChecked:()=>o=!0}],{type:"slider",text:"位置",value:()=>({value:h,min:-.5,max:u,step:.025}),input:(t,e)=>{h=t,m=e}}],generator:(t,e)=>new f(t,e)}},4088:(t,e,s)=>{s.d(e,{c:()=>i,Zy:()=>o,f7:()=>c,fC:()=>l,iC:()=>r});var a=s(1008),n=s(1550);const i=299792458,o=8854187817e-21,c=2*Math.PI,l=Math.sqrt(2);class r{static EB_Delta(t,e,s,n){const o=t.len3();if(o<1e-5){const t=Math.tanh(s*i*e);return[n.scale(-1/c*-s*s*s*(1+2*(1-3*t*t)*(1-t*t))/3),a.V.Zero(3)]}const l=Math.tanh(s*o),r=Math.tanh(s*(o+i*e)),h=Math.tanh(s*(o-i*e)),u=.5*s*(1-r*r),d=.5*s*(1-h*h),f=-s*s*l*(1-l*l),m=-s*s*r*(1-r*r),p=-s*s*h*(1-h*h),E=f/o,_=-(m-2*f+p)/(2*o),M=(.5*(1+r)-2*(.5*(1+l))+.5*(1+h))/(2*o*o*o)-(u-2*(.5*s*(1-l*l))+d)/(2*o*o);return[n.scale(E-_+M).plus(t.scale((_-3*M)*n.dot36(t)/(o*o))).scale(-1/c),t.cross3(n).scale(-1/i*-1/c*(-(u-d)/o+(m-p))/(2*o*o))]}static E_Delta_init(t,e,s){const a=t.len3(),n=Math.tanh(e*a);if(a<1e-5)return s.scale(e*e*e/c);{const t=-e*e*n*(1-n*n);return s.scale(-1/c/a*t)}}static E_Delta_infty(t,e,s){const a=t.len3();if(a<1e-5)return s.scale(-1/c*-e*e*e/3);const n=Math.tanh(e*a),i=-e*e*n*(1-n*n),o=((.5*(1+n)-.5)/a-.5*e*(1-n*n))/a;return t.scale(s.dot36(t)/(a*a)).scale((3*o+i)/a).minus(s.scale(o/a)).scale(-1/c)}static Delta_Rho(t,e,s){const a=t.len3();if(a<1e-5)return 0;if(a>3/e)return 0;const n=Math.tanh(e*a);return t.dot36(s)/(c*a*a)*(-e*e*n*(1-n*n)/a- -e*e*e*(1-3*n*n)*(1-n*n))}static Delta_Rho_max(t){const e=e=>{const s=1e-5,n=r.Delta_Rho(new a.V([0,0,e]),t,new a.V([0,0,1]));return(r.Delta_Rho(new a.V([0,0,e+s]),t,new a.V([0,0,1]))-n)/s};let s=0,n=3/t;for(let t=0;t<20;t++){const t=(s+n)/2;console.log(t,e(t)),e(t)>0?n=t:s=t}return-e(s)<e(n)?s:n}static Delta(t,e){const s=t.len3();if(s<1e-5)return 2/c*e*e*e;if(s>3/e)return 0;const a=Math.tanh(e*s);return-2*(-e*e*a*(1-a*a))/(c*s)}static E_static_Delta(t,e,s){const n=t.len3();if(n<1e-5)return a.V.Zero(3);{const a=Math.tanh(e*n),i=.5*(1+a),l=.5*e*(1-a*a);return t.scale(s/(c*o)*(i-.5-n*l)/(n*n*n))}}static EB_LienardWiechert(t,e,s,n,l){const r=1/(2*c*o),h=1/i,u=h*h,d=t.minus(e),f=d.len3();if(f<1e-5)return[a.V.Zero(3),a.V.Zero(3)];const m=d.scale(1/f),p=m.minus(s.scale(h)),E=1/(1-u*s.sq3()),_=E*f*f*Math.pow(1-h*s.dot36(m),3),M=p.minus(d.scale(E*u).cross3(n.cross3(p))).scale(l*r/_);return[M,m.cross3(M).scale(h)]}static EB_ByParticle(t,e,s,n,o,c){let l=0,h=0,u=e;for(let s=0;s<10&&(h=e-1e-10*Math.pow(10,s),l=t.minus(n(h)).len3()-i*(e-h),!(l<0));s++){if(9==s)return{E:a.V.Zero(3),B:a.V.Zero(3),G:0};u=h}for(let s=0;s<10;s++){const s=(u+h)/2;l=t.minus(n(s)).len3()-i*(e-s),l<0?h=s:u=s}h=(h+u)/2;for(let s=0;s<5;s++){const s=n(h);l=t.minus(s).len3()-i*(e-h),h+=-l/(-t.minus(s).unit3().dot36(o(h))+i)}const[d,f]=r.EB_LienardWiechert(t,n(h),o(h),c(h),s);return{E:d,B:f,G:Math.abs(l)}}}r.SetRGBA=(t,e,s)=>{const a=s<.5?2*s:1,n=s<.5?2*s:2-2*s,i=s<.5?1:2-2*s,o=t=>Math.max(0,Math.min(1,t)),c=t=>Math.floor(255*o(t));t[4*e+0]=c(a),t[4*e+1]=c(n),t[4*e+2]=c(i),t[4*e+3]=c(.5-.5*o(n))},r.SetBallColor=(t,e)=>{const s=e<.5?2*e:1,a=e<.5?2*e:2-2*e,i=e<.5?1:2-2*e,o=t=>Math.max(0,Math.min(1,t)),c=t.material;c.ambientColor=new n.Wo(o(s),o(a),o(i)),c.alpha=1-c.ambientColor.g}}}]);