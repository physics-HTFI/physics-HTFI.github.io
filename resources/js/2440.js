"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[2440],{2440:(t,s,e)=>{e.r(s),e.d(s,{spec:()=>m});var n=e(1550);class i{constructor(t,s){this.segment=0,this.dXdt=(t,s)=>{const[e,i]=s.dat,h=c(e,this.segment),o=u(e,this.segment);return new n.V([i,h.dot36(o.scale(-1*i*i).plus(n.g))/(1*h.sq3())])},this.E=t=>.5*Math.pow(this.X.dat[1],2)*c(this.X.dat[0],this.segment).sq3()-1*r(this.X.dat[0],this.segment).dot36(n.g),this.is_master=0==s,this.X0=void 0===t.s0?void 0:new n.V([t.s0,t.v0]),this.segment0=t.segment0,this.ball=n.ay.Ball(.1,s),this.X=this.reset()}reset(){var t,s,e;return this.is_master&&(g(),X(),n.jG.is_3D&&n.jG.autoRotation(!0)),this.segment=null!==(t=this.segment0)&&void 0!==t?t:d,this.X=null!==(e=null===(s=this.X0)||void 0===s?void 0:s.clone())&&void 0!==e?e:new n.V([a,.3])}draw(t){this.ball.position=r(this.X.dat[0],this.segment).to_Vector3()}proceed(t,s){const e=t;if(this.X=n.ME.RK4_free(t,this.X,this.dXdt,s),this.X.dat[0]<0||1<this.X.dat[0]){const i=this.X.dat[0]<0?0:1;for(let s=0;s<3;s++){const s=-(this.X.dat[0]-i)/this.X.dat[1];this.X=n.ME.RK4_free(t,this.X,this.dXdt,s)}const o=this.X.dat[1]*c(this.X.dat[0],this.segment).len3();0==i&&(this.X.dat[0]+=1,this.segment=(this.segment+h.length-1)%h.length),1==i&&(this.X.dat[0]-=1,this.segment=(this.segment+1)%h.length),this.X.dat[1]=o/c(this.X.dat[0],this.segment).len3(),this.X=n.ME.RK4_free(t,this.X,this.dXdt,s-(t-e))}}}let h,o=[],[a,d]=[0,0];const l=(t,s,e,i,h)=>{const o=t[0].dat,a=t[1].dat,d=t[2].dat,l=t[3].dat,r=[o[0]*s+a[0]*e+d[0]*i+l[0]*h,o[1]*s+a[1]*e+d[1]*i+l[1]*h,o[2]*s+a[2]*e+d[2]*i+l[2]*h];return new n.V(r)},r=(t,s)=>{const e=1-t;return l(h[s],e*e*e,3*t*e*e,3*t*t*e,t*t*t)},c=(t,s)=>{const e=1-t;return l(h[s],-3*e*e,3*(1-3*t)*e,3*t*(2-3*t),3*t*t)},u=(t,s)=>{const e=1-t;return l(h[s],6*e,6*(3*t-2),6*(1-3*t),6*t)},X=()=>{o.forEach((t=>t.dispose())),o=[];for(let t=0;t<h.length;t++){const s=[],e=[];for(let i=0;i<100;i++){const h=r(i/99,t);n.jG.is_3D?e.push(h):s.push(...h.dat)}let i;n.jG.is_3D?i=n.ay.Tube(.003,e,t):(i=n.ay.Curve(0,1,100,t),n.ay.UpdateCurve(i,s)),o.push(i)}},g=()=>{if(n.jG.is_3D){const t=5,s=()=>2*Math.random()-1;let e=!1;do{e=!1;const i=[],o=[];for(let e=0;e<t;e++)i.push(new n.V([s(),s(),1*e/(t-1)-.5])),o.push(new n.V([s(),s(),s()]).scale(1.5));h=[];let l=0;[a,d]=[0,0];for(let s=0;s<t;s++){const n=(s+1)%t,X=[i[s],i[s].plus(o[s]),i[n].minus(o[n]),i[n]];h.push(X);for(let t=0;t<1;t+=.01){const n=r(t,s).dat[2];l<n&&([l,a,d]=[n,t,s]);const i=c(t,s),h=u(t,s);Math.pow(i.len3(),3)/i.cross3(h).len3()<.1&&(e=!0)}}}while(e)}else h=[[new n.V([-.07195626,0,-.20266023]),new n.V([-1.8355514,0,.41616226]),new n.V([-1.5588463,0,-1.0532223]),new n.V([-.14113256,0,.16468451])],[new n.V([-.14113256,0,.16468451]),new n.V([1.2765813,0,1.3825913]),new n.V([-.13429506,0,1.8776508]),new n.V([.21158651,0,.04092169])],[new n.V([.21158651,0,.04092169]),new n.V([.55746802,0,-1.7958076]),new n.V([1.6916391,0,-.82148275]),new n.V([-.07195626,0,-.20266023])]]},m={title:"ベジェ曲線",comment:"太いグリッドの間隔: 1m",cases:[{title:"3次元（毎回ランダム）",setup:()=>{n.jG.set_3D(4,.5,.4,!0);n.ay.Ground(3).position.z=-1.2},init:[{},{s0:0,v0:.5,segment0:3},{s0:0,v0:.5,segment0:1}]},{title:"2次元",setup:()=>{n.jG.set_2D(4),n.ay.Ground(2)},init:[{s0:0,v0:.96,segment0:0},{s0:0,v0:.4,segment0:0},{s0:0,v0:0,segment0:0}]}],generator:(t,s)=>new i(t,s)}}}]);