"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[5834],{5834:(t,s,i)=>{i.r(s),i.d(s,{spec:()=>h});var e=i(1550);let a;const o=.008;class n{constructor(t,s){this.line=[0,1,2].map((t=>e.ay.Tube(o,2))),this.arrow_g=[e.ay.Arrow(0),e.ay.Arrow(0)],this.arrow_c=[e.ay.Arrow(0),e.ay.Arrow(0)],this.dXdt=(t,s)=>(0,e.iO)(s,this.F(t,s),this.m),this.reset=()=>this.X=this.X0.clone(),this.proceed=(t,s)=>this.X=e.ME.RK4_free(t,this.X,this.dXdt,s),this.E=t=>(0,e.uZ)(this.X,this.m),this.m=t.m,this.a=new e.V(t.a.flat()).split3(),this.X0=new e.V([...t.x0.flat(),...t.v0.flat()]),this.X=this.reset(),this.ball=this.m.map(((t,s)=>e.ay.Ball(.2*Math.pow(t,1/3),s))),0==s&&(e.ay.FixedPoint(.05,e.jG.is_3D).position=this.a[0].to_Vector3(),e.ay.FixedPoint(.05,e.jG.is_3D).position=this.a[1].to_Vector3());const i={M:new e.V([this.m[0],this.m[0],this.m[0],this.m[1],this.m[1],this.m[1]]),F_ext:(t,s)=>e.V.concat(e.g.scale(this.m[0]),e.g.scale(this.m[1])),diff_G:(t,s)=>{const[i,a,o,n]=s.split3();let[h,r,l]=[i.minus(this.a[0]),i.minus(a),a.minus(this.a[1])];const[c,d,m]=[h.len3(),r.len3(),l.len3()];[h,r,l]=[h.unit3(),r.unit3(),l.unit3()];const _=o.proj3(h).scale(1/c),u=o.minus(n).proj3(r).scale(1/d),p=n.proj3(l).scale(1/m),w=h.plus(r).dat,y=l.minus(r).dat,b=_.plus(u).dat,G=p.minus(u).dat;return{G_x:new e.M(1,6,[w[0],w[1],w[2],y[0],y[1],y[2]]),ddt_G_t:new e.V([0]),ddt_G_x:new e.M(1,6,[b[0],b[1],b[2],G[0],G[1],G[2]]),G_xx:void 0,G_tt:void 0,G_tx:void 0}}};this.F=e.ME.F_constrained(i)}draw(t){const s=this.X.first_half().split3(),i=this.F(t,this.X);for(let t=0;t<2;t++){this.ball[t].position=s[t].to_Vector3(),this.arrow_g[t].setEnabled(a),this.arrow_c[t].setEnabled(a);const o=e.g.scale(this.m[t]),n=i.slice3(3*t).minus(o);e.ay.Set_ArrowPosition(this.arrow_g[t],s[t],o,.015),e.ay.Set_ArrowPosition(this.arrow_c[t],s[t],n,.015,2)}e.ay.UpdateTube(this.line[0],[this.a[0],s[0]],o),e.ay.UpdateTube(this.line[1],[s[0],s[1]],o),e.ay.UpdateTube(this.line[2],[s[1],this.a[1]],o)}}const h={title:"ディアボロ（＝2粒子・1拘束条件）",comment:"太いグリッドの間隔: 1m<br><br>おもり同士、または、おもりと<br>固定点が近づき過ぎると計算が<br>破綻する。",cases:[{title:"3次元",setup:()=>{e.jG.set_3D(10,.5,.35,!0);e.ay.Ground(3).position.z=-1.5},init:[{x0:[[-2,-.1,1.5],[1,.1,0]],v0:[[0,0,0],[0,0,0]],m:[1,2],a:[[-3,0,1],[3,0,1.5]]}]},{title:"2次元",setup:()=>{e.jG.set_2D(9.5),e.ay.Ground(2)},init:[{x0:[[-2.5,0,.5],[1.5,0,2.5]],v0:[[0,0,0],[0,0,0]],m:[1,2],a:[[-3,0,0],[3,0,1]]}]}],init:()=>a=!1,controls:[{type:"check",text:"力を表示",checked:()=>a,change:t=>a=t,color:"#f00"}],generator:(t,s)=>new n(t,s)}}}]);