"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[3891],{3891:(t,s,i)=>{i.r(s),i.d(s,{spec:()=>l});var n=i(1550),e=function(t,s,i,n){return new(i||(i=Promise))((function(e,o){function a(t){try{h(n.next(t))}catch(t){o(t)}}function c(t){try{h(n.throw(t))}catch(t){o(t)}}function h(t){var s;t.done?e(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(a,c)}h((n=n.apply(t,s||[])).next())}))};const o=[0,1,2],a=(t,s,i)=>{const n=t.split3();return s.map(((t,e)=>[n[e].minus(n[(e+1)%3]),t*s[(e+1)%3]*i]))};let c;function h(t,s,i){const e=a(t,s,i).map((t=>(0,n.NC)(t[0],t[1])));return n.V.concat(e[0].minus(e[2]),e[1].minus(e[0]),e[2].minus(e[1]))}class r{constructor(t,s){this.arrow=o.map((t=>n.ay.Arrow(0))),this.dXdt=(t,s)=>(0,n.iO)(s,h(s,this.m,this.G),this.m),this.m=t.m,this.G=t.G,this.distance=t.distance,this.ball=this.m.map(((s,i)=>n.ay.Ball(.15*Math.pow(s,1/3),t.color[i]))),this.X=this.reset()}reset(){const t=t=>new n.V(o.map((s=>t*(.5+Math.random())))).unit3().scale(this.distance),s=[t(1),t(-1)],i=new n.V(o.map((t=>.5-1*Math.random()))).proj3(s[0]).unit3(),e=[i,i.negate123()],a=new n.V(o.map((t=>-(this.m[0]*s[0].dat[t]+this.m[1]*s[1].dat[t])/this.m[2]))),c=new n.V(o.map((t=>-(this.m[0]*e[0].dat[t]+this.m[1]*e[1].dat[t])/this.m[2])));return this.X=n.V.concat(s[0],s[1],a,e[0],e[1],c)}proceed(t,s){this.X=n.ME.RK4_free(t,this.X,this.dXdt,s)}draw(t){const s=this.X.split3();h(this.X,this.m,this.G).split3().forEach(((t,i)=>{this.ball[i].position=s[i].to_Vector3(),this.arrow[i].setEnabled(c),n.ay.Set_ArrowPosition(this.arrow[i],s[i],t,.08,.8),n.ay.ShadowOnOff(this.ball[i],s[i].dat[2]>m)}))}E(t){return(0,n.CD)(this.X,this.m)+a(this.X,this.m,this.G).reduce(((t,s)=>t+(0,n.L1)(s[0],s[1])),0)}}const m=-2;function u(){return e(this,void 0,void 0,(function*(){n.jG.set_3D(8,0,.35,!0);n.ay.Ground(3).position.z=m}))}const l={title:"重力（3体）",comment:"接近しすぎると計算誤差が大きくなり破綻する",cases:[{title:"質量比 1:2:4（毎回ランダム）",init:[{m:[2,4,8],G:.5,distance:2,color:[0,1,2]}],setup:u},{title:"質量比 1:1:1（毎回ランダム）",init:[{m:[2,2,2],G:.5,distance:1,color:[0,1,2]}],setup:u}],init:()=>c=!0,controls:[{type:"check",text:"力を表示",checked:()=>c,change:t=>c=t,color:"#f00"}],generator:(t,s)=>new r(t,s)}}}]);